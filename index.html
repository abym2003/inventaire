<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simulateur AJM — Salaire journalier uniquement</title>

  <style>
    :root{
      --bg:#0b0f12;
      --card:#0f1418;
      --muted:#98a0a6;
      --accent:#7bd389;
      --glass: rgba(255,255,255,0.05);
    }

    *{
      box-sizing:border-box;
      font-family:Inter, sans-serif;
    }

    body{
      background:var(--bg);
      color:#e6eef3;
      padding:32px;
    }

    .container{
      max-width:1100px;
      margin:auto;
    }

    .card{
      background:var(--card);
      padding:20px;
      border-radius:12px;
      margin-bottom:24px;
      box-shadow:0 0 20px #0004;
    }

    h2{
      margin-top:0;
    }

    label{
      display:block;
      margin-bottom:5px;
      color:var(--muted);
    }

    input, select{
      width:100%;
      padding:10px;
      margin-bottom:14px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.15);
      background:var(--glass);
      color:#e6eef3;
    }

    .row{
      display:flex;
      gap:18px;
    }

    .col{
      flex:1;
    }

    .btn{
      background:var(--accent);
      border:none;
      padding:12px 20px;
      border-radius:8px;
      color:#000;
      font-weight:bold;
      cursor:pointer;
      margin-top:10px;
    }

    .result{
      padding:12px;
      background:#142026;
      border-left:4px solid var(--accent);
      border-radius:8px;
      margin-top:12px;
    }

    .subtitle{
      font-size:1.1rem;
      margin-top:25px;
      margin-bottom:10px;
      border-bottom:1px solid #ffffff22;
      padding-bottom:5px;
    }
  </style>
</head>

<body>

<div class="container">

  <!-- Bloc 1 -->
  <div class="card">
    <h2>Informations actuelles</h2>

    <div class="row">
      <div class="col">
        <label>Salaire brut déjà perçu</label>
        <input id="salary_done" type="number" min="0" step="0.01" value="0">
      </div>

      <div class="col">
        <label>Heures déjà effectuées</label>
        <input id="hours_done" type="number" min="0" step="0.01" value="0">
      </div>
    </div>
  </div>

  <!-- Bloc 2 -->
  <div class="card">
    <h2>Période et heures</h2>

    <label>Mois</label>
    <select id="month">
      <option value="31">Janvier (31)</option>
      <option value="28">Février (28)</option>
      <option value="31">Mars (31)</option>
      <option value="30">Avril (30)</option>
      <option value="31">Mai (31)</option>
      <option value="30">Juin (30)</option>
      <option value="31">Juillet (31)</option>
      <option value="31">Août (31)</option>
      <option value="30">Septembre (30)</option>
      <option value="31">Octobre (31)</option>
      <option value="30">Novembre (30)</option>
      <option value="31">Décembre (31)</option>
    </select>

    <div class="row">
      <div class="col">
        <label>Heures travaillées dans le mois</label>
        <input id="hours_month" type="number" min="0" step="0.01" value="0">
      </div>

      <div class="col">
        <label>Heures souhaitées</label>
        <input id="hours_wanted" type="number" min="0" step="0.01" value="0">
      </div>
    </div>
  </div>

  <!-- Bloc 3 -->
  <div class="card">
    <h2>Salaire (journalier uniquement)</h2>

    <div class="row">
      <div class="col">
        <label>Salaire journalier</label>
        <input id="rate" type="number" min="0" step="0.01" value="0">
      </div>

      <div class="col">
        <label>Nombre de jours travaillés</label>
        <input id="days_worked" type="number" min="0" value="0">
      </div>
    </div>
  </div>

  <button class="btn" onclick="calculate()">Calculer</button>

  <div id="results"></div>

</div>


<script>
function calculate(){

  const salaryDone = parseFloat(document.getElementById("salary_done").value);
  const hoursDone = parseFloat(document.getElementById("hours_done").value);
  const monthDays = parseInt(document.getElementById("month").value);
  const hoursMonth = parseFloat(document.getElementById("hours_month").value);
  const hoursWanted = parseFloat(document.getElementById("hours_wanted").value);
  const rate = parseFloat(document.getElementById("rate").value);
  const daysWorked = parseInt(document.getElementById("days_worked").value);

  const salaryMonth = rate * daysWorked;
  const salaryWanted = rate * daysWorked;

  const salaryTotalMonth = salaryDone + salaryMonth;
  const salaryTotalWanted = salaryDone + salaryWanted;

  const hoursTotalMonth = hoursDone + hoursMonth;
  const hoursTotalWanted = hoursDone + hoursWanted;

  function calcIndemn(h){
    if(h >= 149) return 0;
    const nonIndemn = Math.floor((h * 1.4) / 8);
    return Math.max(0, monthDays - nonIndemn);
  }

  const daysIndemnMonth = calcIndemn(hoursMonth);
  const daysIndemnWanted = calcIndemn(hoursWanted);

  function calcAJM(S, H){
    let A = S <= 14400
              ? (0.42 * S) / 5000
              : ((0.42 * 14400) + (0.05 * (S - 14400))) / 5000;

    let B = H <= 720
              ? (0.26 * H) / 507
              : ((0.26 * 720) + (0.08 * (H - 720))) / 507;

    return 32.13 * (A + B + 0.4);
  }

  const AJM_month = calcAJM(salaryTotalMonth, hoursTotalMonth);
  const AJM_wanted = calcAJM(salaryTotalWanted, hoursTotalWanted);

  document.getElementById("results").innerHTML = `
    <div class="subtitle">Résultats basés sur les heures travaillées</div>
    <div class="result">
      <b>Salaire total :</b> ${salaryTotalMonth.toFixed(2)} €<br>
      <b>Heures totales :</b> ${hoursTotalMonth.toFixed(2)} h<br>
      <b>Jours indemnisables :</b> ${daysIndemnMonth}<br>
      <b>AJM :</b> ${AJM_month.toFixed(2)} €
    </div>

    <div class="subtitle">Résultats basés sur les heures souhaitées</div>
    <div class="result">
      <b>Salaire total :</b> ${salaryTotalWanted.toFixed(2)} €<br>
      <b>Heures totales :</b> ${hoursTotalWanted.toFixed(2)} h<br>
      <b>Jours indemnisables :</b> ${daysIndemnWanted}<br>
      <b>AJM :</b> ${AJM_wanted.toFixed(2)} €
    </div>
  `;
}
</script>

</body>
</html>
